(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{11:function(e,t,a){e.exports=a(22)},22:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),l=a(10),c=a.n(l),u=(a(9),a(24));const o="/api/persons";var s=()=>u.a.get(o).then(e=>e.data),d=e=>u.a.post(o,e).then(e=>e.data),m=(e,t)=>u.a.put(`${o}/${e}`,t).then(e=>e.data),i=e=>u.a.delete(`${o}/${e}`).then(e=>e.data);const h=e=>{let{message:t,status:a}=e;return null===t?null:r.a.createElement("div",{className:a},t)},E=e=>{let{person:t,handleDelete:a}=e;return r.a.createElement("p",null,t.name," ",t.number," ",r.a.createElement(f,{id:t.id,handleDelete:a}))},p=e=>{let{handleSearch:t,newSearch:a}=e;return r.a.createElement("form",null,r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{onChange:t,value:a})))},b=e=>{let{handleNameChange:t,handleNumberChange:a,newName:n,newNumber:l,addName:c}=e;return r.a.createElement("form",null,r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:t,value:n})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{onChange:a,value:l})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:c},"add")))},f=e=>{let{id:t,handleDelete:a}=e;return r.a.createElement("button",{onClick:()=>a(t)},"Delete")},g=e=>{let{persons:t,handleDelete:a}=e;return r.a.createElement("div",null,t.map(e=>r.a.createElement(E,{key:e.id,person:e,handleDelete:a})))};var w=()=>{const[e,t]=Object(n.useState)([]),[a,l]=Object(n.useState)(""),[c,u]=Object(n.useState)(""),[o,E]=Object(n.useState)(""),[f,w]=Object(n.useState)(""),[v,C]=Object(n.useState)("");Object(n.useEffect)(()=>{s().then(e=>{Array.isArray(e)?t(e):t([])}).catch(e=>{console.error("Error fetching data:",e),t([])})},[]),Object(n.useEffect)(()=>{if(f){const e=setTimeout(()=>{w(null),C("")},3e3);return()=>clearTimeout(e)}},[f]);const N=""===o?e:e.filter(e=>e.name.toLowerCase().includes(o.toLowerCase()));return r.a.createElement("div",null,r.a.createElement(h,{message:f,status:v}),r.a.createElement("h2",null,"Phonebook"),r.a.createElement(p,{handleSearch:e=>{E(e.target.value)},newSearch:o}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(b,{handleNameChange:e=>{l(e.target.value)},newName:a,handleNumberChange:e=>{u(e.target.value)},newNumber:c,addName:n=>{n.preventDefault();const r=e.find(e=>e.name===a);if(r){if(r&&window.confirm(r.name+" is already added to phonebook, replace the old number with a new one?")){const n={...r,number:c};m(r.id,n).then(n=>{t(e.map(e=>e.id!==r.id?e:n)),l(""),u(""),C("success"),w("Phone number changed for "+a)}).catch(e=>{C("error"),w(e.response.data.error)})}}else{d({name:a,number:c}).then(n=>{t(e.concat(n)),C("success"),w("Added "+a),l(""),u("")}).catch(e=>{e.response.data&&(C("error"),w(e.response.data.error))})}}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(g,{persons:N,handleDelete:a=>{const n=e.find(e=>e.id===a);n&&window.confirm(`Delete ${n.name}?`)&&i(a).then(()=>{t(e.filter(e=>e.id!==a)),C("success"),w("Deleted "+n.name)}).catch(e=>{C("error"),w(`the note '${n.name}' was already deleted from server`),t(n.filter(e=>e.id!==a))})}}))};var v=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,25)).then(t=>{let{getCLS:a,getFID:n,getFCP:r,getLCP:l,getTTFB:c}=t;a(e),n(e),r(e),l(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null))),v()},9:function(e,t,a){}},[[11,1,2]]]);
//# sourceMappingURL=main.afab9c0a.chunk.js.map